// --- MINI RED SOCIAL INTERACTIVA ---

const readline = require("readline");

// la memoria donde se guardan los mensajes
const memoria = [];

// cerebro: decide si un mensaje se guarda
function enviarMensaje(texto) {
  const palabrotas = ["mala", "feo"];
  
  for (let palabra of palabrotas) {
    if (texto.includes(palabra)) {
      return "Mensaje rechazado ðŸ˜¡";
    }
  }
  
  const mensaje = { texto: texto, fecha: new Date() };
  memoria.push(mensaje);
  return "Mensaje guardado âœ…";
}

// funciÃ³n para mostrar todos los mensajes
function verMensajes() {
  if (memoria.length === 0) {
    console.log("No hay mensajes aÃºn ðŸ˜´\n");
    return;
  }
  console.log("\n--- Mensajes ---");
  memoria.forEach((m, i) => {
    console.log(`${i + 1}. ${m.texto} (${m.fecha.toLocaleString()})`);
  });
  console.log("----------------\n");
}

// INTERFAZ PARA INTERACTUAR
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

function pedirMensaje() {
  rl.question("Escribe tu mensaje: ", (mensaje) => {
    const resultado = enviarMensaje(mensaje);
    console.log(resultado);
    verMensajes();
    pedirMensaje(); // llama otra vez para seguir escribiendo
  });
}

// EMPIEZA EL JUEGO
console.log("Â¡Bienvenido a tu mini-red social!\n");
pedirMensaje();
